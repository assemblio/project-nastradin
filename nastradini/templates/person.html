{% extends "layout.html" %}

{% block body %}

<script>
    $(document).ready(function() {
        $('.btn').button();

        $('.date-picker').datepicker({
            autoclose: true,
            todayHighlight: true,
            format: 'dd/mm/yyyy',
        });
        $(".gender" ).children().each(function() {

            var attr = $(this).children().first().attr('checked');

            if (typeof attr !== typeof undefined && attr !== false) {
                $(this).addClass("active");
            }
        });


    });




</script>


<script type="text/javascript">
    var experienceIndexer = 1;

    function add_experience(){
        addExperienceFields();
        addNewExperience();
      }

    function addExperienceFields(){

        // Every time this function runs, it appends HTML form-fields to the   #experience-container div
        $("#experience-container").append('<hr><div id="experience"><div class="form-group" id="job_title">\
                                                        <label for="job_title_value">Job Title:</label>\
                                                        <input type="text" name="job_title" id="job_title_value-'+experienceIndexer+'">\
                                               </div>\
                                               <div class="form-group" id="location">\
                                               Location:<select id="location_value-'+experienceIndexer+'" class="form-control" data-style="btn-primary">\
                                                              <option value="Prishtine">Prishtine</option>\
                                                              <option value="Ferizaj">Ferizaj</option>\
                                                              <option value="Gjilan">Gjilan</option>\
                                                              <option value="Prizeren">Prizeren</option>\
                                                         </select>\
                                               </div>\
                                               <div class="form-group" id="description">\
                                                    <label for="description-value-'+experienceIndexer+'">Description:</label>\
                                                    <input type="text" name="description" id="description-value-'+experienceIndexer+'">\
                                               </div>\
                                           </div>');
        // Increase the experienceIndexer so we can add different fields with different indexes

        experienceIndexer= experienceIndexer + 1;
    }


    function addNewExperience(){

        // Create the JSON, where we are going to save the values each time this function is called and return them.
        var experiencesJson = [];

        // Get the job title with JQuery
        var experiences =  $('#experience-container').children('.experience');

        experiences.each(function (exp) {

            var title =  exp.children('.job-title');

            var description =  exp.children('.description')[0];

            var expJson = { 'title': title, 'location':location, 'description': description};

            experiencesJson.push(expJson);
        });


        // Get the job description with JQuery
        var description = $('#experience-container').children('#description').children('#description-value-'+indexer).val();

        // Get the work location with JQuery
        var work_location = $('#experience-container').children('#location').children('#location_value-'+indexer).val();

        // Build the experience JSON
        experienceJSON['jobTitle'] = jobTitle;
        experienceJSON['description'] = description;
        experienceJSON['work_location'] = work_location;


        // Check if experienceArray was instantiated, if not instantiate it
        if( typeof experienceArray === typeof undefined){
            experienceArray = [];
        }


    }





</script>
<form action="{{ url_for('person') }}" method="post" class="form-horizontal">

    <!-- FIRST NAME -->
    <div class="form-group">
        {{ form.first_name.label(class_="control-label col-xs-4") }}
        <div class="col-xs-5">
            {{ form.first_name(class_="form-control") }}
        </div>
    </div>

    <!-- LAST NAME -->
    <div class="form-group">
        {{ form.last_name.label(class_="control-label col-xs-4") }}
        <div class="col-xs-5">
            {{ form.last_name(class_="form-control") }}
        </div>
    </div>

    <!-- BIRTH DATE -->
    <div class="form-group">
        {{ form.birth_date.label(class_="control-label col-xs-4") }}
        <div class="col-xs-5">
            {{ form.birth_date(class_="form-control date-picker") }}
        </div>
    </div>

    <!-- GENDER -->
    <div class="form-group">
        {{ form.gender.label(class_="control-label col-xs-4") }}
        <div class="btn-group col-xs-2 gender" data-toggle="buttons">
            {% for subfield in form.gender %}
            <div class="btn btn-default">
                {{ subfield }}
                {{ subfield.label }}
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- CITY -->
    <div class="form-group">
        {{ form.city.label(class_="control-label col-xs-4") }}
        <div class="col-xs-5">
            {{ form.city(class_="form-control") }}
        </div>
    </div>

    <!-- HIGHEST LEVEL OF EDUCATION -->
    <div class="form-group">
        {{ form.highest_level_of_education.label(class_="control-label col-xs-4") }}
        <div class="col-xs-5">
            {{ form.highest_level_of_education(class_="form-control") }}
        </div>
    </div>

    <!-- INDUSTRY -->
    <div class="form-group">
        {{ form.industry.label(class_="control-label col-xs-4") }}
        <div class="col-xs-5">
            {{ form.industry(class_="form-control") }}
        </div>
    </div>

    <!-- PROFESSION -->
    <div class="form-group">
        {{ form.profession.label(class_="control-label col-xs-4") }}
        <div class="col-xs-5">
            {{ form.profession(class_="form-control") }}
        </div>
    </div>

    <!-- SUMMARY -->
    <div class="form-group">
        {{ form.summary.label(class_="control-label col-xs-4") }}
        <div class="col-xs-5">
            {{ form.summary(class_="form-control") }}
        </div>
    </div>

    <!-- SKILLS -->
    <div class="form-group">
        {{ form.skills.label(class_="control-label col-xs-4") }}
        <div class="col-xs-5">
            {{ form.skills(class_="form-control") }}
        </div>
    </div>

    <!-- MINIMUM SALARY REQUIREMENT -->
    <div class="form-group">
        {{ form.minimum_salary_requirement.label(class_="control-label col-xs-4") }}
        <div class="col-xs-5">
            {{ form.minimum_salary_requirement(class_="form-control") }}
        </div>
    </div>


    <br/> <br/>
    <label class="control-label col-xs-4"> EXPERIENCE </label>
    <hr>


    <div class="form-group" id="experience-container" style="width:300px;">
        <div class="experience">
            <div class="form-group" class="job_title">
                <label class="col-xs-5" for="job_title_value-0">Job Title:</label>
                <input type="text" name="job_title" id="job_title_value-0">
            </div>

            <div class="form-group" class="location">
                Location:<select id="location_value-0" class="form-control col-xs-5" data-style="btn-primary">
                <option value="Prishtine">Prishtine</option>
                <option value="Ferizaj">Ferizaj</option>
                <option value="Gjilan">Gjilan</option>
                <option value="Prizeren">Prizeren</option>
            </select>
            </div>

            <div class="form-group" class="description">
                <label class="col-xs-5" for="description-value-0">Description:</label>
                <input type="textarea" name="description" id="description-value-0">
            </div>
        </div>
    </div>
    <button type='button' class="btn" onClick="javscript:add_experience()">Add Experience</button>


    <br>

    <div align="center">
        <button type="submit" class="btn btn-primary">Register</button>
    </div>
    <br>

</form>

{% endblock %}
